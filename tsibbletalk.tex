% !TeX root = RJwrapper.tex
\title{Conversations in time: interactive visualization to explore structured
temporal data}
\author{by Earo Wang, Dianne Cook}

\maketitle

\abstract{%
An abstract of less than 150 words.
}

\hypertarget{introduction}{%
\section{Introduction}\label{introduction}}

\begin{itemize}
\tightlist
\item
  An ensemble of graphics
\item
  Accelerate the exploratory data visualization process
\end{itemize}

\hypertarget{background-and-motivation}{%
\section{Background and motivation}\label{background-and-motivation}}

\hypertarget{interactive-visualization-systems-with-linking-views}{%
\subsection{Interactive visualization systems with linking
views}\label{interactive-visualization-systems-with-linking-views}}

\begin{itemize}
\tightlist
\item
  \{ggobi\} and \{xggobi\}
\item
  \{cranvas\} and \{cranvastime\}
\item
  \href{http://crossfilter.github.io/crossfilter/}{crossfilter.js} \&
  \href{https://dc-js.github.io/dc.js/}{dc.js}
\item
  \{crosstalk\} and html widgets
\end{itemize}

\hypertarget{tidy-temporal-data-and-workflow}{%
\subsection{Tidy temporal data and
workflow}\label{tidy-temporal-data-and-workflow}}

The \CRANpkg{tsibble} package extends the \texttt{data.frame} and
\CRANpkg{tibble} structure to represent temporal data in tidy format
{[}cite{]}. A tsibble consists of \emph{index}, \emph{key}, and other
measured variables in one data frame. The \emph{index} column holds
time-based indices. The \emph{key} column(s) uniquely identifies a
collection of related observational units during a period of time
defined by \emph{index}. They are ``sticky'' columns to a
\texttt{tsibble} over the course of transformation.

The \CRANpkg{feasts} and \CRANpkg{fable} packages, part of the
\textbf{tidyverts} suite, aim to make time series analysis easier. They
provide analytical and forecasting tools for the tsibble data structure,
generating tsibble-centered workflow. Functions, such as
\texttt{features()} and \texttt{model()}, summarise a sequence of
indexed values down to a single statistic or model by every
observational unit. The output is a normal table, where each row
corresponds to an observational unit denoted by ``key''. In the context
of relational databases, the ``key'' acts like a foreign key in a
reduced form of tsibble, while the index and key together operates like
a primary key.

At the early stage of exploratory temporal data analysis, time series
plots and scatterplots goes hand by hand. (insert figures below)

\hypertarget{shared-temporal-data-for-coordinated-views}{%
\section{Shared temporal data for coordinated
views}\label{shared-temporal-data-for-coordinated-views}}

The \pkg{tsibbletalk} package, inspired by the \CRANpkg{crosstalk}
package, introduces a shared tsibble data structure to enable reactivity
for temporal data (i.e.~a \texttt{tsibble}). The
\texttt{as\_shared\_tsibble()} function turns a tsibble to a mutable
tsibble \texttt{SharedTsibbleData}, as an R6 subclass of
\texttt{SharedData} from \{crosstalk\}. A \emph{tsibble} data object
holds a set of interrelated series, identified by the ``key'', in a data
frame. When the ``key'' includes more than two variables, there can
exist intrinsic structures in all combinations of variables: either
nesting or crossing. (Add an example here)

The \texttt{spec} argument in the \texttt{as\_shared\_tsibble()}
function takes a symbolic formula to allow users to specify structural
combinations, using \texttt{/} and \texttt{*} adopted from Wilkinson
notation (10.2307/2346786) for nesting and crossing respectively.

\begin{itemize}
\tightlist
\item
  Nesting variables generate hierarchical tree, hence
  \texttt{plotly\_key\_tree()}. Overview and navigation made easier.
\item
  One-to-many linking: marking a single point of interest highlights all
  other points that share particular data values (categorical linking)
\item
  Lists of key values, and json
\item
  Self-linking: a single data source
\end{itemize}

\hypertarget{slicing-and-dicing-time}{%
\section{Slicing and dicing time}\label{slicing-and-dicing-time}}

The other critical aspect of a tsibble is ``index'', that provides
foundational temporal context. A common tool in time series analytical
toolkit is seasonal plots that lay time series not on the whole time
scale, but on an origin-less relative time unit, for example
\texttt{gg\_season()} in the \{feasts\} package. It helps to examine and
emphasise periodic/aperiodic patterns, comparing to time series plots
that primarily focus on trends. Standard seasonal plots break the
overall time into two components: seasonal periods on the x-axis, and
grouped by their corresponding lower-resolution time. For example,
monthly data can be decomposed into months separated by years, and
hourly data into hours grouped by days. Data collected at lower-level
resolutions often exhibits more than one seasonal patterns. To discover
typical seasonal or non-typical profiles, it is helpful to quickly
browse through many possible periods. Interactivity ought to be enabled.

The \{tsibbletalk\} package provides a pair of UI and server functions,
as a shiny module, to help with finding interesting time slices in a
shiny application. The pair, decoupled to \texttt{tsibbleDiceUI()} and
\texttt{tsibbleDiceServer()}, presents a clean interface and forms a
resusable piece. Like all shiny modules, users should supply a unique
session id. The UI function \texttt{tsibbleDiceUI()} shows a slider that
controls the number of periods, and a plot specified by users. The
server function \texttt{tsibbleDiceServer()} is the workhorse,
transforming data and updating the plot. It expects a \texttt{ggplot}
(converted to \texttt{plotly} via \texttt{ggplotly()}) or
\texttt{plotly} object. This plot can be line charts, or other graphical
elements (such as boxplots). But it assumes that tsibble's time index is
plotted on the x-axis. The other mandatory argument is to specify the
number of seasonal periods that requires shifting.

(Data flows) Transformed data generally requires redrawing the plot, and
worsen the performance of shiny. The underlying tsibble data is called
back and transformed in R. Using the \texttt{plotly.js} react method,
only transformed data is sent to the server side, while keeping the rest
configuration unchanged (e.g.~layout and graphical elements). It is
performant, and users will not experience notable delay in response to
the change in the slider input. Dissect time index, and propagate
transformed data to shiny server.

\hypertarget{case-study-monthly-domestic-tourist-trips-in-australia}{%
\section{Case study: monthly domestic tourist trips in
Australia}\label{case-study-monthly-domestic-tourist-trips-in-australia}}

\hypertarget{conclusions-and-discussions}{%
\section{Conclusions and
discussions}\label{conclusions-and-discussions}}

\bibliography{references.bib}

\address{%
Earo Wang\\
The Univeristy of Auckland\\
Department of Statistics\\ The Univeristy of Auckland\\ New Zealand\\
}
\href{mailto:earo.wang@auckland.ac.nz}{\nolinkurl{earo.wang@auckland.ac.nz}}

\address{%
Dianne Cook\\
Monash Univerisity\\
Department of Econometrics and Business Statistics\\ Monash University\\ Australia\\
}
\href{mailto:dicook@monash.edu}{\nolinkurl{dicook@monash.edu}}

